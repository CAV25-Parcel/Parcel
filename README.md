<img src="https://i.postimg.cc/HLRSgTY0/zone.png" alt="Parcel" style="zoom:150%;" />

# ParcelðŸš€

Parcel is an acceleration framework for the verification of Interrupt Sequence Diagram(ISD). We provide test cases from the exsitng ISD verification tools and the generation from LLMs.

## Preliminary
The version of java should be 20 or higher. And the max memory of JVM should be set to 10G.

We use Z3 SMT solver to solve the constraints, which is included in the project.

We use `Maven` to manage the dependencies. You can install the dependencies by the following command and package the project by the following command:
```shell
  mvn clean package
```

## Reproducing Experiment
We provide the test cases in the folders `test-cases` and `llm-cases`, which contain the test from prior works and the generated by GPT-o1. 
### Reproduce RQ1
You can run the test cases from prior work by the following command:
```shell
  java -jar --enable-preview target/Parcel-1.0-SNAPSHOT.jar test-cases/ADC-Bug/ADC-Bug
```
The test case files are in the folder `test-cases`, you can just input the name from content root.

### Reproduce RQ2
You can run the cases generated by GPT-o1 using the following command:
```shell
  java -jar --enable-preview target/Parcel-1.0-SNAPSHOT.jar llm-cases/cases1
```
The test case files are in the folder `llm-cases`, you can just input the name from content root.

### Reproduce RQ3
You can choose the switch of the accelerating tactic with two parameters. The following command is an example:
```shell
  java -jar --enable-preview target/Parcel-1.0-SNAPSHOT.jar llm-cases/cases1 true false 
```
The first parameter is the switch of the tactic **Unobservable event reduction**, and the second parameter is the switch of the tactic **Zone partition**. 
The value of these parameters is `true` or `false`.

### Experimental Results
We provide the experimental results in the paper as follows:

| Case              | #event | #non-int | #int | #prior | #cons | #prop | result | prototype time(s) | ISDChecker time(s) | ISDChecker ac-ratio | PARCEL time(s) | PARCEL ac-ratio |
| ----------------- | ------ | -------- | ---- | ------ | ----- | ----- | ------ | ----------------- | ------------------ | ------------------- | -------------- | --------------- |
| ADC_Bug           | 10     | 0        | 1    | 1      | 6     | 1     | Ã—      | 0.673             | 0.092              | 7.31                | 0.083          | 8.10            |
| fridge_controller | 16     | 0        | 1    | 1      | 8     | 1     | Ã—      | 0.831             | 0.623              | 1.33                | 0.075          | 11.08           |
| altitude_display  | 18     | 0        | 1    | 1      | 5     | 2     | Ã—      | 0.447             | 0.261              | 1.71                | 0.085          | 5.26            |
| medical_monitor   | 18     | 0        | 1    | 1      | 11    | 1     | Ã—      | 5.793             | 5.264              | 1.10                | 0.083          | 69.80           |
| time_sync         | 22     | 1        | 1    | 1      | 4     | 1     | Ã—      | 3.123             | 1.838              | 1.70                | 0.161          | 19.52           |
| orbit_upload      | 12     | 1        | 2    | 1      | 6     | 1     | Ã—      | 19.680            | 29.24              | 0.67â†“               | 2.117          | 9.30            |
| backup_computing  | 12     | 1        | 2    | 2      | 7     | 1     | Ã—      | 138.752           | 2.604              | 53.28               | 0.079          | 1756            |
| system_tick       | 14     | 0        | 2    | 2      | 6     | 1     | Ã—      | 2.403             | 2.433              | 0.988â†“              | 0.112          | 21.46           |
| satellite_spin    | 14     | 1        | 2    | 2      | 7     | 1     | Ã—      | 16.855            | 7.654              | 2.02                | 0.284          | 59.35           |
| car_controller    | 22     | 0        | 3    | 2      | 9     | 1     | Ã—      | timeout           | 2898               | 2.48                | 0.131          | 54961           |
| task_rotate       | 28     | 0        | 3    | 1      | 7     | 1     | Ã—      | OOM               | 4021               | 1.79                | 0.074          | 97297           |

#### Experimental Results of Correct Cases

| Case    | #event | #frag | #non-intfrag | #int | #prior | #spec | complexity | **PARCEL** | **PARCEL-ip** | **PARCEL-ep** |
| ------- | ------ | ----- | ------------ | ---- | ------ | ----- | ---------- | ---------- | ------------- | ------------- |
| Case1c  | 30     | 5     | 4            | 1    | 1      | 14    | 1.18       | 0.15       | 0.17          | 13%           |
| Case2c  | 26     | 6     | 2            | 4    | 4      | 9     | 3.37       | 0.08       | 331.55        | 436155%       |
| Case3c  | 30     | 5     | 3            | 2    | 1      | 16    | 4.61       | 0.19       | 1.22          | 549%          |
| Case4c  | 34     | 6     | 4            | 2    | 2      | 14    | 5.33       | 2.17       | 2.42          | 11%           |
| Case5c  | 34     | 6     | 4            | 2    | 2      | 15    | 6.12       | 0.14       | 10.84         | 7753%         |
| Case6c  | 30     | 6     | 3            | 3    | 2      | 15    | 9.11       | 1.84       | 3.18          | 73%           |
| Case7c  | 38     | 5     | 3            | 2    | 2      | 20    | 9.12       | 1.85       | 2.10          | 13%           |
| Case8c  | 34     | 7     | 5            | 2    | 2      | 17    | 9.83       | 0.04       | 29.50         | 73645%        |
| Case9c  | 40     | 7     | 5            | 2    | 2      | 16    | 10.24      | 8.29       | 25.56         | 208%          |
| Case10c | 38     | 7     | 4            | 3    | 2      | 14    | 13.41      | 15.38      | 259.27        | 1586%         |
| Case11c | 40     | 5     | 2            | 3    | 3      | 21    | 15.88      | 51.49      | 56.44         | 10%           |
| Case12c | 38     | 6     | 3            | 3    | 3      | 21    | 22.62      | 44.65      | 101.10        | 126%          |
| Case13c | 36     | 6     | 3            | 3    | 3      | 22    | 23.52      | 440.29     | 570.43        | 30%           |
| Case14c | 40     | 8     | 5            | 3    | 3      | 17    | 26.01      | 4.88       | 2182.62       | 44608%        |
| Case15c | 48     | 7     | 4            | 3    | 3      | 21    | 38.10      | 2.73       | 129.58        | 4655%         |
| Case16c | 48     | 8     | 5            | 3    | 3      | 19    | 38.99      | 294.14     | 1551.00       | 427%          |

#### Experimental Results of Defect Cases

| Case    | #event | #frag | #non-intfrag | #int | #prior | #spec | complexity | **PARCEL** | **PARCEL-ip** | **PARCEL-ep** |
| ------- | ------ | ----- | ------------ | ---- | ------ | ----- | ---------- | ---------- | ------------- | ------------- |
| Case1d  | 28     | 4     | 3            | 1    | 1      | 15    | 0.95       | 0.14       | 0.18          | 26%           |
| Case2d  | 44     | 6     | 2            | 2    | 2      | 8     | 1.13       | 0.11       | 0.80          | 658%          |
| Case3d  | 34     | 7     | 6            | 1    | 1      | 15    | 2.30       | 13.09      | 30.48         | 133%          |
| Case4d  | 40     | 5     | 3            | 2    | 2      | 15    | 5.40       | 0.10       | 20.55         | 21529%        |
| Case5d  | 32     | 7     | 4            | 3    | 3      | 14    | 11.29      | 0.14       | 2.26          | 1517%         |
| Case6d  | 38     | 6     | 2            | 4    | 4      | 15    | 13.68      | 0.18       | 0.30          | 66%           |
| Case7d  | 40     | 7     | 4            | 3    | 3      | 17    | 20.81      | 0.07       | 3.34          | 5035%         |
| Case8d  | 40     | 7     | 3            | 4    | 4      | 16    | 24.58      | 0.08       | 0.10          | 15%           |
| Case9d  | 40     | 7     | 3            | 4    | 4      | 16    | 24.58      | 0.17       | 1.48          | 792%          |
| Case10d | 54     | 10    | 6            | 4    | 3      | 14    | 50.80      | 0.68       | 1.45          | 114%          |
